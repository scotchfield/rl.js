<!doctype html>
<html><body>
<div id="game_canvas"></div>
<!-- Note the relative location of rl.js here. -->
<script src="../../src/rl.js" type="text/javascript"></script>
<script type="text/javascript">
(function () {
    var width = 20, height = 20,

    player = {
        x: 0, y: 0, c: '@', style: '#ffffff',
    },

    render = function () {
        rl.clear()
            .render(0, 0)
            .style(player.style)
            .write(player.c, player.x, player.y);
    },

    keydown = function (e) {
        var nx = player.x, ny = player.y;

        if (rl.isKey(e, rl.key.d)) {
            nx += 1;
        } else if (rl.isKey(e, rl.key.a)) {
            nx -= 1;
        } else if (rl.isKey(e, rl.key.s)) {
            ny += 1;
        } else if (rl.isKey(e, rl.key.w)) {
            ny -= 1;
        }

        if (rl.canMoveTo(nx, ny)) {
            player.x = nx;
            player.y = ny;
        }

        render();
    };

    rl.create('game_canvas', {width: width, height: height})
        .registerKeydown(keydown)
        .addTile(1, 1);

    render();
}());
</script>
</body></html>
