<!doctype html>
<html>
  <head>
    <title>rl.js</title>
    <style type="text/css">
body {
  background-color: white;
}
    </style>
  </head>
  <body>
<div id="game_canvas"></div>
<script src="../src/rl.js" type="text/javascript"></script>
<script type="text/javascript">
var game = (function () {
    var canvas, timer, tiles = [];

    var WaterTile = function (t) {
        this.start = Date.now();
        this.t = t;
        this.c = '#';
        this.style = function () {
            var t = ((Date.now() - this.start) % this.t) / this.t;
            var a = [0, 71, 171], b = [135, 206, 235];
            t = (Math.sin(t * 2 * Math.PI) + 1) / 2;

            return 'rgb(' +
                Math.round(a[0] + (b[0] - a[0]) * t) + ',' +
                Math.round(a[1] + (b[1] - a[1]) * t) + ',' +
                Math.round(a[2] + (b[2] - a[2]) * t) + ')';
        }
    };

    var init = function () {
        canvas = rl.canvas({width: 20, height: 20});
        document.getElementById('game_canvas').appendChild(canvas);

        for (var i = 0; i < 20; i += 1) {
            for (var j = 0; j < 20; j += 1) {
                tiles.push({x: i, y: j, t: new WaterTile(
                    Math.round(2000 + Math.random() * 2000))});
            }
        }
    };

    init();

    timer = setInterval(function () {
        rl.clear();
        tiles.forEach(
            function (tile) {
                rl.style(tile.t.style());
                rl.square(tile.x, tile.y);
            }
        );
    }, 50);
}());
</script>
  </body>
</html>
